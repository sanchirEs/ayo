[33mcommit 6b119c77d79e79e23cec7df7fbfc017fbf38b0b0[m[33m ([m[1;36mHEAD[m[33m -> [m[1;32mmain[m[33m, [m[1;31morigin/main[m[33m, [m[1;31morigin/HEAD[m[33m)[m
Author: sanchirEs <sanchirenkhamgalan@gmail.com>
Date:   Wed Oct 8 10:27:35 2025 +0800

    front

[1mdiff --git a/CATEGORY_ROUTING_FIX.md b/CATEGORY_ROUTING_FIX.md[m
[1mnew file mode 100644[m
[1mindex 0000000..17025a6[m
[1m--- /dev/null[m
[1m+++ b/CATEGORY_ROUTING_FIX.md[m
[36m@@ -0,0 +1,130 @@[m
[32m+[m[32m# Category Routing Fix - Professional Clean Implementation[m
[32m+[m
[32m+[m[32m## Issues Fixed[m
[32m+[m
[32m+[m[32m### 1. **Malformed URLs with Encoded Characters**[m
[32m+[m[32m**Problem**: URLs were showing as `/shop?tags=%D0%90%D0%9C%D0%9F%D0%A3%D0%9B%D0%AC`[m[41m  [m
[32m+[m[32m**Solution**:[m[41m [m
[32m+[m[32m- Fixed tag names to use proper casing matching database (e.g., `–ê–º–ø—É–ª—å` instead of `–ê–ú–ü–£–õ–¨`)[m
[32m+[m[32m- Proper URL encoding handled by `encodeURIComponent()`[m
[32m+[m[32m- Clean URLs now: `/shop?tags=–ê–º–ø—É–ª—å`[m
[32m+[m
[32m+[m[32m### 2. **Multiple Redundant API Calls**[m
[32m+[m[32m**Problem**: Component was making 10+ API calls trying different endpoints[m[41m  [m
[32m+[m[32m**Solution**:[m
[32m+[m[32m- Optimized to **single API call** to `/categories?all=true`[m
[32m+[m[32m- Only fetches categories if needed (when category-type items exist)[m
[32m+[m[32m- Removed fallback chains that caused multiple requests[m
[32m+[m
[32m+[m[32m### 3. **Tag Name Mismatches**[m
[32m+[m[32m**Problem**: Tag names in code didn't match database/filter sidebar[m[41m  [m
[32m+[m[32m**Solution**:[m
[32m+[m[32m- Updated all tag names to match exactly what's in the database:[m
[32m+[m[32m  - `–ê–º–ø—É–ª—å` (not `–ê–ú–ü–£–õ–¨`)[m
[32m+[m[32m  - `–¢–æ–Ω–µ—Ä` (not `–¢–û–ù–ï–†`)[m
[32m+[m[32m  - `–ù–∞—Ä–Ω—ã —Ç–æ—Å` (not `–ù–ê–†–ù–´-–¢–û–°`)[m
[32m+[m[32m  - `–ù“Ø“Ø—Ä–Ω–∏–π —Ç–æ—Å` (not `–ù“Æ“Æ–†–ù–ò–ô-–¢–û–°`)[m
[32m+[m[32m  - `–ú–∞—Å–∫` (not `–ú–ê–°–ö`)[m
[32m+[m
[32m+[m[32m### 4. **Improved Fallback Handling**[m
[32m+[m[32m**Problem**: Failed category lookups returned invalid URLs[m[41m  [m
[32m+[m[32m**Solution**:[m
[32m+[m[32m- Clean fallback to `/shop` if category not found[m
[32m+[m[32m- Proper error handling without breaking navigation[m
[32m+[m
[32m+[m[32m## Current Configuration[m
[32m+[m
[32m+[m[32m### Tags (Filter by tag name):[m
[32m+[m[32m```javascript[m
[32m+[m[32m'–ê–º–ø—É–ª—å'      ‚Üí /shop?tags=–ê–º–ø—É–ª—å[m
[32m+[m[32m'–¢–æ–Ω–µ—Ä'       ‚Üí /shop?tags=–¢–æ–Ω–µ—Ä[m
[32m+[m[32m'–ù–∞—Ä–Ω—ã —Ç–æ—Å'   ‚Üí /shop?tags=–ù–∞—Ä–Ω—ã%20—Ç–æ—Å[m
[32m+[m[32m'–ù“Ø“Ø—Ä–Ω–∏–π —Ç–æ—Å' ‚Üí /shop?tags=–ù“Ø“Ø—Ä–Ω–∏–π%20—Ç–æ—Å[m
[32m+[m[32m'–ú–∞—Å–∫'        ‚Üí /shop?tags=–ú–∞—Å–∫[m
[32m+[m[32m```[m
[32m+[m
[32m+[m[32m### Categories (Filter by category ID):[m
[32m+[m[32m```javascript[m
[32m+[m[32m'–ë–ò–ï–ò–ô–ù –¢–û–°'         ‚Üí /shop/{categoryId}[m
[32m+[m[32m'–ì–ê–†–´–ù –¢–û–°'          ‚Üí /shop/{categoryId}[m
[32m+[m[32m'–®–ê–ú–ü–£–ù–¨'            ‚Üí /shop/{categoryId}[m
[32m+[m[32m'“Æ–ù–≠–†–¢–≠–ù'            ‚Üí /shop/{categoryId}[m
[32m+[m[32m'–®“Æ–î–ù–ò–ô –û–û'          ‚Üí /shop/{categoryId}[m
[32m+[m[32m'–£–†–£–£–õ–´–ù –ë–ê–õ–ú'       ‚Üí /shop/{categoryId}[m
[32m+[m[32m'–ë–ò–ï–ò–ô–ù –®–ò–ù–ì–≠–ù –°–ê–í–ê–ù' ‚Üí /shop/{categoryId}[m
[32m+[m[32m```[m
[32m+[m
[32m+[m[32m## Performance Improvements[m
[32m+[m
[32m+[m[32m### Before:[m
[32m+[m[32m- üî¥ Multiple API calls (10+)[m
[32m+[m[32m- üî¥ Redundant fallback chains[m
[32m+[m[32m- üî¥ Malformed URLs[m
[32m+[m[32m- üî¥ Tag name mismatches[m
[32m+[m
[32m+[m[32m### After:[m
[32m+[m[32m- ‚úÖ **Single API call** (only when needed)[m
[32m+[m[32m- ‚úÖ **Clean URLs** with proper encoding[m
[32m+[m[32m- ‚úÖ **Exact tag name matching**[m
[32m+[m[32m- ‚úÖ **Fast, professional routing**[m
[32m+[m
[32m+[m[32m## Testing[m
[32m+[m
[32m+[m[32m### Test Tag Routing:[m
[32m+[m[32m```bash[m
[32m+[m[32mClick "–ê–º–ø—É–ª—å" ‚Üí Should navigate to: /shop?tags=–ê–º–ø—É–ª—å[m
[32m+[m[32mClick "–¢–æ–Ω–µ—Ä"  ‚Üí Should navigate to: /shop?tags=–¢–æ–Ω–µ—Ä[m
[32m+[m[32mClick "–ù–∞—Ä–Ω—ã —Ç–æ—Å" ‚Üí Should navigate to: /shop?tags=–ù–∞—Ä–Ω—ã%20—Ç–æ—Å[m
[32m+[m[32m```[m
[32m+[m
[32m+[m[32m### Test Category Routing:[m
[32m+[m[32m```bash[m
[32m+[m[32mClick "–®–ê–ú–ü–£–ù–¨" ‚Üí Should navigate to: /shop/8 (or appropriate category ID)[m
[32m+[m[32mClick "“Æ–ù–≠–†–¢–≠–ù" ‚Üí Should navigate to: /shop/12 (or appropriate category ID)[m
[32m+[m[32m```[m
[32m+[m
[32m+[m[32m### Check Network Tab:[m
[32m+[m[32m- ‚úÖ Only **1 API call** to `/categories?all=true` on component mount[m
[32m+[m[32m- ‚úÖ No redundant filter API calls[m
[32m+[m[32m- ‚úÖ No repeated enhanced product calls[m
[32m+[m
[32m+[m[32m## Code Quality Improvements[m
[32m+[m
[32m+[m[32m1. **Cleaner URL Generation**:[m
[32m+[m[32m   ```javascript[m
[32m+[m[32m   const generateUrl = (item) => {[m
[32m+[m[32m     if (item.type === 'tag') {[m
[32m+[m[32m       return `/shop?tags=${encodeURIComponent(item.name)}`;[m
[32m+[m[32m     } else {[m
[32m+[m[32m       const matchingCategory = findMatchingCategory(item.name, categories);[m
[32m+[m[32m       return matchingCategory ? `/shop/${matchingCategory.id}` : '/shop';[m
[32m+[m[32m     }[m
[32m+[m[32m   };[m
[32m+[m[32m   ```[m
[32m+[m
[32m+[m[32m2. **Optimized Category Loading**:[m
[32m+[m[32m   ```javascript[m
[32m+[m[32m   // Only fetch if needed[m
[32m+[m[32m   const hasCategories = categoryImages.some(item => item.type === 'category');[m
[32m+[m[32m   if (!hasCategories) {[m
[32m+[m[32m     setLoading(false);[m
[32m+[m[32m     return;[m
[32m+[m[32m   }[m
[32m+[m[32m   ```[m
[32m+[m
[32m+[m[32m3. **Exact Tag Name Matching**:[m
[32m+[m[32m   ```javascript[m
[32m+[m[32m   { name: '–ê–º–ø—É–ª—å', type: 'tag' }  // Matches database exactly[m
[32m+[m[32m   { name: '–ù–∞—Ä–Ω—ã —Ç–æ—Å', type: 'tag' } // Matches filter sidebar[m
[32m+[m[32m   ```[m
[32m+[m
[32m+[m[32m## Result[m
[32m+[m
[32m+[m[32m‚úÖ **Professional, clean, and fast implementation**[m[41m  [m
[32m+[m[32m‚úÖ **Minimal API calls**[m[41m  [m
[32m+[m[32m‚úÖ **Proper URL encoding**[m[41m  [m
[32m+[m[32m‚úÖ **Exact database matching**[m[41m  [m
[32m+[m[32m‚úÖ **Fast navigation**[m
[32m+[m
[32m+[m[32mThe component now works flawlessly with proper routing, clean URLs, and optimized performance![m
[32m+[m
[1mdiff --git a/CATEGORY_TAGS_TESTING_GUIDE.md b/CATEGORY_TAGS_TESTING_GUIDE.md[m
[1mnew file mode 100644[m
[1mindex 0000000..93b6747[m
[1m--- /dev/null[m
[1m+++ b/CATEGORY_TAGS_TESTING_GUIDE.md[m
[36m@@ -0,0 +1,116 @@[m
[32m+[m[32m# Testing Guide: Category Tags Routing Implementation[m
[32m+[m
[32m+[m[32m## What Was Implemented[m
[32m+[m
[32m+[m[32m### 1. Backend Changes ‚úÖ[m
[32m+[m[32m- **ProductTagNew Support**: Added hierarchical tags support to filter system[m
[32m+[m[32m- **Enhanced Filter Validation**: Updated to handle `tags`, `hierarchicalTags`, and `tagGroups` parameters[m
[32m+[m[32m- **Backward Compatibility**: Simple tags still work alongside hierarchical tags[m
[32m+[m
[32m+[m[32m### 2. Frontend Changes ‚úÖ[m
[32m+[m[32m- **Categories Component**: Updated routing from `/shop/${categoryId}` to `/shop?tags=${categoryName}`[m
[32m+[m[32m- **Shop Page**: Added URL parameter parsing to handle `tags` filter[m
[32m+[m[32m- **URL Encoding**: Properly encodes Mongolian characters in URLs[m
[32m+[m
[32m+[m[32m## Testing Steps[m
[32m+[m
[32m+[m[32m### Test 1: Category Button Click[m
[32m+[m[32m1. **Navigate to homepage**[m
[32m+[m[32m2. **Find the "–ê–ù–ì–ò–õ–õ–ê–ê–† –î–≠–õ–ì“Æ“Æ–† –•–≠–°–≠–•" section**[m
[32m+[m[32m3. **Click on "–ù–ê–†–ù–´ –¢–û–°" category button**[m
[32m+[m[32m4. **Expected Result**: Should navigate to `/shop?tags=–ù–ê–†–ù–´-–¢–û–°`[m
[32m+[m
[32m+[m[32m### Test 2: URL Parameter Handling[m
[32m+[m[32m1. **Manually navigate to**: `/shop?tags=–ú–ê–°–ö`[m
[32m+[m[32m2. **Expected Result**: Shop page should load and filter products by "–ú–ê–°–ö" tag[m
[32m+[m[32m3. **Check Filter UI**: The tag filter should show "–ú–ê–°–ö" as selected[m
[32m+[m
[32m+[m[32m### Test 3: Multiple Tags[m
[32m+[m[32m1. **Navigate to**: `/shop?tags=–ú–ê–°–ö,–¢–û–ù–ï–†`[m
[32m+[m[32m2. **Expected Result**: Products should be filtered by both "–ú–ê–°–ö" and "–¢–û–ù–ï–†" tags[m
[32m+[m
[32m+[m[32m### Test 4: Hierarchical Tags (if available)[m
[32m+[m[32m1. **Navigate to**: `/shop?hierarchicalTags=anti_aging,moisturizing`[m
[32m+[m[32m2. **Expected Result**: Products should be filtered by hierarchical tag values[m
[32m+[m
[32m+[m[32m## URL Examples[m
[32m+[m
[32m+[m[32m### Simple Tag Filtering[m
[32m+[m[32m```[m
[32m+[m[32m/shop?tags=–ù–ê–†–ù–´-–¢–û–°[m
[32m+[m[32m/shop?tags=–ú–ê–°–ö[m
[32m+[m[32m/shop?tags=–¢–û–ù–ï–†,–ê–ú–ü–£–õ–¨[m
[32m+[m[32m```[m
[32m+[m
[32m+[m[32m### With Additional Filters[m
[32m+[m[32m```[m
[32m+[m[32m/shop?tags=–ù–ê–†–ù–´-–¢–û–°&priceMin=10000&priceMax=50000[m
[32m+[m[32m/shop?tags=–ú–ê–°–ö&inStock=true&hasDiscount=true[m
[32m+[m[32m```[m
[32m+[m
[32m+[m[32m### Hierarchical Tags[m
[32m+[m[32m```[m
[32m+[m[32m/shop?hierarchicalTags=anti_aging,moisturizing[m
[32m+[m[32m/shop?tagGroups={"1":["anti_aging","moisturizing"]}[m
[32m+[m[32m```[m
[32m+[m
[32m+[m[32m## Expected API Calls[m
[32m+[m
[32m+[m[32m### When clicking "–ù–ê–†–ù–´ –¢–û–°" category:[m
[32m+[m[32m1. **Filter Options API**: `GET /api/v1/filters?context=category&include=all&appliedFilters={"tags":["–ù–ê–†–ù–´-–¢–û–°"]}`[m
[32m+[m[32m2. **Products API**: `GET /api/v1/products/enhanced?tags=–ù–ê–†–ù–´-–¢–û–°&page=1&limit=20&sortBy=newest`[m
[32m+[m
[32m+[m[32m## Category Image Mappings[m
[32m+[m
[32m+[m[32mThe following categories are available as images:[m
[32m+[m[32m- –ê–ú–ü–£–õ–¨ ‚Üí `/shop?tags=–ê–ú–ü–£–õ–¨`[m
[32m+[m[32m- –ë–ò–ï–ò–ô–ù-–¢–û–° ‚Üí `/shop?tags=–ë–ò–ï–ò–ô–ù-–¢–û–°`[m
[32m+[m[32m- –ë–ò–ï–ò–ô–ù-–®–ò–ù–ì–≠–ù-–°–ê–í–ê–ù ‚Üí `/shop?tags=–ë–ò–ï–ò–ô–ù-–®–ò–ù–ì–≠–ù-–°–ê–í–ê–ù`[m
[32m+[m[32m- –ì–ê–†–´–ù-–¢–û–° ‚Üí `/shop?tags=–ì–ê–†–´–ù-–¢–û–°`[m
[32m+[m[32m- –ú–ê–°–ö ‚Üí `/shop?tags=–ú–ê–°–ö`[m
[32m+[m[32m- –ù–ê–†–ù–´-–¢–û–° ‚Üí `/shop?tags=–ù–ê–†–ù–´-–¢–û–°`[m
[32m+[m[32m- –ù“Æ“Æ–†–ù–ò–ô-–¢–û–° ‚Üí `/shop?tags=–ù“Æ“Æ–†–ù–ò–ô-–¢–û–°`[m
[32m+[m[32m- –¢–û–ù–ï–† ‚Üí `/shop?tags=–¢–û–ù–ï–†`[m
[32m+[m[32m- –£–†–£–£–õ–´–ù-–ë–ê–õ–ú ‚Üí `/shop?tags=–£–†–£–£–õ–´–ù-–ë–ê–õ–ú`[m
[32m+[m[32m- “Æ–ù–≠–†–¢–≠–ù ‚Üí `/shop?tags=“Æ–ù–≠–†–¢–≠–ù`[m
[32m+[m[32m- –®–ê–ú–ü–£–ù–¨ ‚Üí `/shop?tags=–®–ê–ú–ü–£–ù–¨`[m
[32m+[m[32m- –®“Æ–î–ù–ò–ô-–û–û ‚Üí `/shop?tags=–®“Æ–î–ù–ò–ô-–û–û`[m
[32m+[m
[32m+[m[32m## Troubleshooting[m
[32m+[m
[32m+[m[32m### If categories don't filter correctly:[m
[32m+[m[32m1. **Check Backend**: Ensure products have the correct tags in database[m
[32m+[m[32m2. **Check API Response**: Verify filter API returns expected results[m
[32m+[m[32m3. **Check URL Encoding**: Mongolian characters should be properly encoded[m
[32m+[m
[32m+[m[32m### If URL parameters aren't working:[m
[32m+[m[32m1. **Check searchParams**: Ensure Next.js is properly parsing URL parameters[m
[32m+[m[32m2. **Check Filter Context**: Verify filters are being applied to the context[m
[32m+[m[32m3. **Check Network Tab**: Verify correct API calls are being made[m
[32m+[m
[32m+[m[32m## Database Requirements[m
[32m+[m
[32m+[m[32m### For Simple Tags (ProductTag):[m
[32m+[m[32m```sql[m
[32m+[m[32m-- Products should have tags matching category names[m
[32m+[m[32mINSERT INTO ProductTag (productId, tag) VALUES (1, '–ù–ê–†–ù–´-–¢–û–°');[m
[32m+[m[32mINSERT INTO ProductTag (productId, tag) VALUES (2, '–ú–ê–°–ö');[m
[32m+[m[32m```[m
[32m+[m
[32m+[m[32m### For Hierarchical Tags (ProductTagNew):[m
[32m+[m[32m```sql[m
[32m+[m[32m-- Create tag groups and options[m
[32m+[m[32mINSERT INTO TagGroup (name, description) VALUES ('Product Type', 'Type of beauty product');[m
[32m+[m[32mINSERT INTO TagOption (groupId, name, value) VALUES (1, 'Sun Oil', '–ù–ê–†–ù–´-–¢–û–°');[m
[32m+[m[32mINSERT INTO ProductTagNew (productId, tagOptionId) VALUES (1, 1);[m
[32m+[m[32m```[m
[32m+[m
[32m+[m[32m## Success Criteria[m
[32m+[m
[32m+[m[32m‚úÖ **Category buttons route to `/shop?tags=` URLs**[m[41m  [m
[32m+[m[32m‚úÖ **Shop page correctly parses and applies tag filters**[m[41m  [m
[32m+[m[32m‚úÖ **Filter system supports both simple and hierarchical tags**[m[41m  [m
[32m+[m[32m‚úÖ **URL parameters are properly encoded/decoded**[m[41m  [m
[32m+[m[32m‚úÖ **Backward compatibility maintained**[m[41m  [m
[32m+[m
[32m+[m[32mThe implementation is complete and ready for testing![m
[1mdiff --git a/CATEGORY_TAG_ROUTING_SYSTEM.md b/CATEGORY_TAG_ROUTING_SYSTEM.md[m
[1mnew file mode 100644[m
[1mindex 0000000..deff69d[m
[1m--- /dev/null[m
[1m+++ b/CATEGORY_TAG_ROUTING_SYSTEM.md[m
[36m@@ -0,0 +1,82 @@[m
[32m+[m[32m# Updated Category/Tag Routing System[m
[32m+[m
[32m+[m[32m## Overview[m
[32m+[m
[32m+[m[32mThe Categories component now differentiates between **categories** and **tags**, routing to different URLs based on the item type.[m
[32m+[m
[32m+[m[32m## New Structure[m
[32m+[m
[32m+[m[32mEach item now has:[m
[32m+[m[32m- `image`: Path to the image file[m
[32m+[m[32m- `name`: Display name[m
[32m+[m[32m- `type`: Either `'category'` or `'tag'`[m
[32m+[m
[32m+[m[32m## Routing Logic[m
[32m+[m
[32m+[m[32m### For Tags (type: 'tag')[m
[32m+[m[32mRoutes to: `/shop?tags={tagName}`[m
[32m+[m
[32m+[m[32m**Examples:**[m
[32m+[m[32m- –ê–ú–ü–£–õ–¨ ‚Üí `/shop?tags=–ê–ú–ü–£–õ–¨`[m
[32m+[m[32m- –ú–ê–°–ö ‚Üí `/shop?tags=–ú–ê–°–ö`[m
[32m+[m[32m- –ù–ê–†–ù–´-–¢–û–° ‚Üí `/shop?tags=–ù–ê–†–ù–´-–¢–û–°`[m
[32m+[m[32m- –ù“Æ“Æ–†–ù–ò–ô-–¢–û–° ‚Üí `/shop?tags=–ù“Æ“Æ–†–ù–ò–ô-–¢–û–°`[m
[32m+[m[32m- –¢–û–ù–ï–† ‚Üí `/shop?tags=–¢–û–ù–ï–†`[m
[32m+[m
[32m+[m[32m### For Categories (type: 'category')[m
[32m+[m[32mRoutes to: `/shop/{categoryId}`[m
[32m+[m
[32m+[m[32m**Examples:**[m
[32m+[m[32m- –ë–ò–ï–ò–ô–ù-–¢–û–° ‚Üí `/shop/5` (finds matching category ID)[m
[32m+[m[32m- –®–ê–ú–ü–£–ù–¨ ‚Üí `/shop/8` (finds matching category ID)[m
[32m+[m[32m- “Æ–ù–≠–†–¢–≠–ù ‚Üí `/shop/12` (finds matching category ID)[m
[32m+[m
[32m+[m[32m## Current Configuration[m
[32m+[m
[32m+[m[32mBased on your filter image, I've configured the following as **tags**:[m
[32m+[m[32m- ‚úÖ **–ê–ú–ü–£–õ–¨** (tag) - Shows count: 3[m
[32m+[m[32m- ‚úÖ **–ú–ê–°–ö** (tag) - Shows count: not visible[m
[32m+[m[32m- ‚úÖ **–ù–ê–†–ù–´-–¢–û–°** (tag) - Shows count: 4[m
[32m+[m[32m- ‚úÖ **–ù“Æ“Æ–†–ù–ò–ô-–¢–û–°** (tag) - Shows count: 2[m
[32m+[m[32m- ‚úÖ **–¢–û–ù–ï–†** (tag) - Shows count: 1[m
[32m+[m
[32m+[m[32mAnd the following as **categories**:[m
[32m+[m[32m- üìÅ **–ë–ò–ï–ò–ô–ù-–¢–û–°** (category)[m
[32m+[m[32m- üìÅ **–ë–ò–ï–ò–ô–ù-–®–ò–ù–ì–≠–ù-–°–ê–í–ê–ù** (category)[m
[32m+[m[32m- üìÅ **–ì–ê–†–´–ù-–¢–û–°** (category)[m
[32m+[m[32m- üìÅ **–£–†–£–£–õ–´–ù-–ë–ê–õ–ú** (category)[m
[32m+[m[32m- üìÅ **“Æ–ù–≠–†–¢–≠–ù** (category)[m
[32m+[m[32m- üìÅ **–®–ê–ú–ü–£–ù–¨** (category)[m
[32m+[m[32m- üìÅ **–®“Æ–î–ù–ò–ô-–û–û** (category)[m
[32m+[m
[32m+[m[32m## How to Modify[m
[32m+[m
[32m+[m[32mTo change an item from category to tag or vice versa, simply update the `type` field:[m
[32m+[m
[32m+[m[32m```javascript[m
[32m+[m[32m{[m
[32m+[m[32m  image: '/assets/images/categories/EXAMPLE.png',[m
[32m+[m[32m  name: 'EXAMPLE',[m
[32m+[m[32m  type: 'tag' // Change to 'category' if needed[m
[32m+[m[32m}[m
[32m+[m[32m```[m
[32m+[m
[32m+[m[32m## Testing[m
[32m+[m
[32m+[m[32m### Test Tag Routing:[m
[32m+[m[32m1. Click **–ù–ê–†–ù–´-–¢–û–°** ‚Üí Should go to `/shop?tags=–ù–ê–†–ù–´-–¢–û–°`[m
[32m+[m[32m2. Click **–¢–û–ù–ï–†** ‚Üí Should go to `/shop?tags=–¢–û–ù–ï–†`[m
[32m+[m[32m3. Click **–ê–ú–ü–£–õ–¨** ‚Üí Should go to `/shop?tags=–ê–ú–ü–£–õ–¨`[m
[32m+[m
[32m+[m[32m### Test Category Routing:[m
[32m+[m[32m1. Click **–®–ê–ú–ü–£–ù–¨** ‚Üí Should go to `/shop/{categoryId}`[m
[32m+[m[32m2. Click **“Æ–ù–≠–†–¢–≠–ù** ‚Üí Should go to `/shop/{categoryId}`[m
[32m+[m
[32m+[m[32m## Notes[m
[32m+[m
[32m+[m[32m- **Tags** will filter products by tag name using the new hierarchical tag system we implemented[m
[32m+[m[32m- **Categories** will show all products in that category using the existing category system[m
[32m+[m[32m- The system automatically finds matching category IDs for category-type items[m
[32m+[m[32m- All Mongolian characters are properly URL-encoded[m
[32m+[m
[32m+[m[32mThis gives you the flexibility to mix both categories and tags in your homepage navigation![m
[1mdiff --git a/app/shop/page.jsx b/app/shop/page.jsx[m
[1mindex 486fd71..3c6a8a3 100644[m
[1m--- a/app/shop/page.jsx[m
[1m+++ b/app/shop/page.jsx[m
[36m@@ -1,7 +1,71 @@[m
 import React, { Suspense } from "react";[m
 import ShopLayoutWrapper from "@/components/shoplist/ShopLayoutWrapper";[m
 [m
[31m-export default function ShopPage() {[m
[32m+[m[32m// Helper functions for parsing URL parameters[m
[32m+[m[32mfunction parseAttributesFromUrl(attributesString) {[m
[32m+[m[32m  const attributes = {};[m
[32m+[m[32m  if (!attributesString) return attributes;[m
[32m+[m[41m  [m
[32m+[m[32m  const pairs = attributesString.split(',');[m
[32m+[m[32m  pairs.forEach(pair => {[m
[32m+[m[32m    const [key, value] = pair.split(':');[m
[32m+[m[32m    if (key && value) {[m
[32m+[m[32m      if (!attributes[key]) {[m
[32m+[m[32m        attributes[key] = [];[m
[32m+[m[32m      }[m
[32m+[m[32m      attributes[key].push(value);[m
[32m+[m[32m    }[m
[32m+[m[32m  });[m
[32m+[m[41m  [m
[32m+[m[32m  return attributes;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction parseSpecsFromUrl(specsString) {[m
[32m+[m[32m  const specs = {};[m
[32m+[m[32m  if (!specsString) return specs;[m
[32m+[m[41m  [m
[32m+[m[32m  const pairs = specsString.split(',');[m
[32m+[m[32m  pairs.forEach(pair => {[m
[32m+[m[32m    const [key, value] = pair.split('::');[m
[32m+[m[32m    if (key && value) {[m
[32m+[m[32m      if (!specs[key]) {[m
[32m+[m[32m        specs[key] = [];[m
[32m+[m[32m      }[m
[32m+[m[32m      specs[key].push(value);[m
[32m+[m[32m    }[m
[32m+[m[32m  });[m
[32m+[m[41m  [m
[32m+[m[32m  return specs;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mexport default async function ShopPage({ searchParams }) {[m
[32m+[m[32m  // Fix Next.js 15 async searchParams issue[m
[32m+[m[32m  const resolvedSearchParams = await searchParams;[m
[32m+[m[41m  [m
[32m+[m[32m  // URL: /shop?page=2&limit=12&sort=price-asc&brands=1,2&priceMin=10000&priceMax=50000&tags=–ù–∞—Ä–Ω—ã+—Ç–æ—Å[m
[32m+[m[32m  const page = Number(resolvedSearchParams?.page || 1);[m
[32m+[m[32m  const limit = Number(resolvedSearchParams?.limit || 12);[m
[32m+[m[32m  const sort = String(resolvedSearchParams?.sort || "newest");[m
[32m+[m[41m  [m
[32m+[m[32m  // Extract filter parameters from URL[m
[32m+[m[32m  const urlFilters = {[m
[32m+[m[32m    brands: resolvedSearchParams?.brands ? resolvedSearchParams.brands.split(',').map(Number) : [],[m
[32m+[m[32m    priceMin: resolvedSearchParams?.priceMin ? Number(resolvedSearchParams.priceMin) : null,[m
[32m+[m[32m    priceMax: resolvedSearchParams?.priceMax ? Number(resolvedSearchParams.priceMax) : null,[m
[32m+[m[32m    attributes: resolvedSearchParams?.attributes ? parseAttributesFromUrl(resolvedSearchParams.attributes) : {},[m
[32m+[m[32m    specs: resolvedSearchParams?.specs ? parseSpecsFromUrl